---
/**
 * P谩gina Inicio - InnovaTec
 * 
 * Hero, servicios destacados, proyectos y testimonios.
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import Hero from '@/components/sections/Hero.astro';
import ServiceCard from '@/components/sections/ServiceCard.astro';
import ProjectCard from '@/components/sections/ProjectCard.astro';
import TestimonialCard from '@/components/sections/TestimonialCard.astro';
import Button from '@/components/ui/Button.astro';

// Cargar traducciones
const pagesEs = await import('@/locales/es/pages.json');
const pagesEn = await import('@/locales/en/pages.json');
const servicesEs = await import('@/locales/es/services.json');
const servicesEn = await import('@/locales/en/services.json');
const commonEs = await import('@/locales/es/common.json');
const commonEn = await import('@/locales/en/common.json');

// Leer cookie del idioma en el servidor
const localeCookie = Astro.cookies.get('innovatac-locale');
const serverLocale = (localeCookie?.value === 'es' || localeCookie?.value === 'en') 
  ? localeCookie.value as 'es' | 'en'
  : 'es';

const currentLocale = serverLocale;
const pages = currentLocale === 'es' ? pagesEs.default : pagesEn.default;
const services = currentLocale === 'es' ? servicesEs.default : servicesEn.default;
const common = currentLocale === 'es' ? commonEs.default : commonEn.default;

const servicesList = [
  { key: 'web', icon: '' },
  { key: 'desktop', icon: '' },
  { key: 'mobile', icon: '' },
  { key: 'consulting', icon: '' },
];

// Placeholders de proyectos
const projects = [
  {
    id: 1,
    title: currentLocale === 'es' ? 'Sitio Web PYME Local' : 'Local SME Website',
    problem: currentLocale === 'es' ? 'Falta de presencia online' : 'Lack of online presence',
    solution: currentLocale === 'es' ? 'Sitio web responsivo y optimizado' : 'Responsive and optimized website',
    impact: currentLocale === 'es' ? 'Incremento del 50% en consultas' : '50% increase in inquiries',
    technologies: ['HTML', 'CSS', 'JavaScript'],
  },
  {
    id: 2,
    title: currentLocale === 'es' ? 'App de Gesti贸n Interna' : 'Internal Management App',
    problem: currentLocale === 'es' ? 'Procesos manuales ineficientes' : 'Inefficient manual processes',
    solution: currentLocale === 'es' ? 'Aplicaci贸n de escritorio personalizada' : 'Custom desktop application',
    impact: currentLocale === 'es' ? 'Reducci贸n del 70% en tiempo' : '70% time reduction',
    technologies: ['TypeScript', 'Electron'],
  },
  {
    id: 3,
    title: currentLocale === 'es' ? 'App M贸vil para Clientes' : 'Mobile App for Clients',
    problem: currentLocale === 'es' ? 'Acceso limitado a servicios' : 'Limited access to services',
    solution: currentLocale === 'es' ? 'App m贸vil nativa iOS/Android' : 'Native iOS/Android mobile app',
    impact: currentLocale === 'es' ? 'Mejora en satisfacci贸n del cliente' : 'Improved customer satisfaction',
    technologies: ['React Native', 'TypeScript'],
  },
];

// Placeholders de testimonios
const testimonials = [
  {
    id: 1,
    name: currentLocale === 'es' ? 'Mar铆a Gonz谩lez' : 'Maria Gonzalez',
    role: currentLocale === 'es' ? 'Directora, Empresa Local' : 'Director, Local Company',
    text: currentLocale === 'es'
      ? 'InnovaTec transform贸 nuestra presencia online. El sitio web es moderno, r谩pido y f谩cil de usar. Recomendado 100%.'
      : 'InnovaTec transformed our online presence. The website is modern, fast and easy to use. 100% recommended.',
  },
  {
    id: 2,
    name: currentLocale === 'es' ? 'Carlos Rodr铆guez' : 'Carlos Rodriguez',
    role: currentLocale === 'es' ? 'Gerente, PYME' : 'Manager, SME',
    text: currentLocale === 'es'
      ? 'La aplicaci贸n de escritorio que desarrollaron optimiz贸 nuestros procesos internos. Excelente trabajo y soporte.'
      : 'The desktop application they developed optimized our internal processes. Excellent work and support.',
  },
  {
    id: 3,
    name: currentLocale === 'es' ? 'Ana Mart铆nez' : 'Ana Martinez',
    role: currentLocale === 'es' ? 'Emprendedora' : 'Entrepreneur',
    text: currentLocale === 'es'
      ? 'Profesional, cercano y con resultados. InnovaTec entendi贸 perfectamente nuestras necesidades.'
      : 'Professional, close and with results. InnovaTec perfectly understood our needs.',
  },
];
---

<BaseLayout
  title={`${common.site.name} - ${pages.home.hero.title}`}
  description={common.site.description}
>
  <!-- Hero Section -->
  <Hero />

  <!-- Servicios Section -->
  <section class="py-16 bg-light-bg-secondary dark:bg-dark-bg-secondary" aria-labelledby="services-title">
    <div class="container-custom mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 id="services-title" class="text-3xl md:text-4xl font-bold text-light-text-primary dark:text-white mb-4">
          {pages.home.services.title}
        </h2>
        <p class="text-lg text-light-text-secondary dark:text-[#f5f5f5] max-w-2xl mx-auto">
          {pages.home.services.subtitle}
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {servicesList.map((service) => (
          <ServiceCard
            title={services[service.key as keyof typeof services].title}
            description={services[service.key as keyof typeof services].description}
            benefits={services[service.key as keyof typeof services].benefits}
            icon={service.icon}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Proyectos Section -->
  <section class="py-16 bg-light-bg-primary dark:bg-dark-bg-primary" aria-labelledby="projects-title">
    <div class="container-custom mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 id="projects-title" class="text-3xl md:text-4xl font-bold text-light-text-primary dark:text-white mb-4">
          {pages.home.projects.title}
        </h2>
        <p class="text-lg text-light-text-secondary dark:text-[#f5f5f5] max-w-2xl mx-auto">
          {pages.home.projects.subtitle}
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
        {projects.map((project) => (
          <ProjectCard
            title={project.title}
            problem={project.problem}
            solution={project.solution}
            impact={project.impact}
            technologies={project.technologies}
          />
        ))}
      </div>
      <div class="text-center">
        <Button href="/proyectos" variant="outline" size="lg">
          {pages.home.projects.viewAll}
        </Button>
      </div>
    </div>
  </section>

  <!-- Testimonios Section -->
  <section class="py-16 bg-light-bg-secondary dark:bg-dark-bg-secondary" aria-labelledby="testimonials-title">
    <div class="container-custom mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 id="testimonials-title" class="text-3xl md:text-4xl font-bold text-light-text-primary dark:text-white mb-4">
          {pages.home.testimonials.title}
        </h2>
        <p class="text-lg text-light-text-secondary dark:text-[#f5f5f5] max-w-2xl mx-auto">
          {pages.home.testimonials.subtitle}
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {testimonials.map((testimonial) => (
          <TestimonialCard
            name={testimonial.name}
            role={testimonial.role}
            text={testimonial.text}
          />
        ))}
      </div>
      <div class="text-center mt-8">
        <Button href="/testimonios" variant="outline" size="lg">
          {common.cta.learnMore}
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>

